(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{26:function(e,t,n){e.exports=n.p+"static/media/trivia.466d153e.png"},32:function(e,t,n){e.exports=n(56)},37:function(e,t,n){},43:function(e,t,n){},48:function(e,t,n){},51:function(e,t){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),s=n.n(o),c=(n(37),n(16)),i=n(8),u=n(2),l=(n(43),n(7)),m=n.n(l),d=n(13),p=n(19),f=n(3),h=n(4),b=n(6),v=n(5),E=function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n.token);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api.php?amount=5&token=".concat(t));case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),g=n(31),w=function(){var e=localStorage.getItem("PLAYER_RANKING");return e?JSON.parse(e):[]},k=function(e){var t=w();localStorage.setItem("PLAYER_RANKING",JSON.stringify([].concat(Object(g.a)(t),[e])))},O=function(e){localStorage.setItem("token",e)},j=function(e){return e.map((function(e){return{difficulty:e.difficulty,question:e.question,category:e.category,answers:e.incorrectAnswers.concat(e.correctAnswer).sort((function(){return Math.random()-.5}))}}))},N=function(e){return{type:"SAVE_USER_TOKEN",userToken:e}},x=function(e){return{type:"CHOICES_EXPIRED",payload:e}},C=n(26),S=n.n(C),_=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement(c.b,{to:"/config"},r.a.createElement("button",{"data-testid":"btn-settings",type:"button",className:"settings-btn"},"Configura\xe7\xf5es"))}}]),n}(r.a.Component),B=(n(48),n(49),function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",isButtonDisabled:!0},e.validateEmail=function(){var t=e.state,n=t.name,a=t.email;n.length>0&&a.length>0&&e.setState({isButtonDisabled:!1})},e.handleInput=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(p.a)({},a,r),e.validateEmail)},e.handleSumbit=Object(d.a)(m.a.mark((function t(){var n,a,r,o,s,c,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,a=n.getToken,r=n.history,o=n.userToStore,s=e.state,c=s.name,i=s.email,o(c,i),t.next=5,a();case 5:r.push("/game");case 6:case"end":return t.stop()}}),t)}))),e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.isButtonDisabled;return r.a.createElement("div",{className:"login-page"},r.a.createElement("img",{src:S.a,className:"App-logo animate__animated animate__flip animate__repeat-1",alt:"logo"}),r.a.createElement("div",{className:"animate__animated animate__fadeInUp animate__delay-1s"},r.a.createElement("form",{className:"loginForm"},r.a.createElement("label",{htmlFor:"name"},"Name:",r.a.createElement("input",{onChange:this.handleInput,"data-testid":"input-player-name",name:"name",type:"text",value:t,className:"login-input"})),r.a.createElement("label",{htmlFor:"email"},"E-mail:",r.a.createElement("input",{onChange:this.handleInput,"data-testid":"input-gravatar-email",name:"email",type:"email",value:n,className:"login-input"})),r.a.createElement("button",{disabled:a,type:"button","data-testid":"btn-play",onClick:this.handleSumbit},"Play")),r.a.createElement(_,null)))}}]),n}(r.a.Component)),T=Object(i.b)((function(e){var t=e.player;return{name:t.name,gravatarEmail:t.gravatarEmail,score:t.score}}),(function(e){return{userToStore:function(t,n){return e(function(e,t){return{type:"SET_USER",payload:{name:e,email:t}}}(t,n))},getToken:function(){return e(function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:return n=e.sent,t(N(n)),O(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(B),A=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement("h2",{"data-testid":"settings-title"},"Configura\xe7\xf5es")}}]),n}(r.a.Component),I=n(28),q=n.n(I),G=function(e){var t=q()(e).toString();return"https://www.gravatar.com/avatar/".concat(t)},D=(n(52),function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).componentDidUpdate=function(){var t=e.props.score;localStorage.setItem("score",t)},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.gravatarEmail,a=e.score;return r.a.createElement("div",{className:"header-content"},r.a.createElement("div",null,r.a.createElement("img",{className:"header-profile-picture","data-testid":"header-profile-picture",src:G(n),alt:"Gravatar"}),r.a.createElement("p",{"data-testid":"header-player-name",className:"player-name"},"Name:"," ",t)),r.a.createElement("div",{className:"score"},"Scores:",r.a.createElement("p",{"data-testid":"header-score"},a)))}}]),n}(r.a.Component)),R=Object(i.b)((function(e){var t=e.player;return{name:t.name,gravatarEmail:t.gravatarEmail,score:t.score}}))(D),P=(n(53),function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getDifficulty=function(e){switch(e){case"easy":return 1;case"medium":return 2;case"hard":return 3}},e.setDatatestId=function(e){return!0===e.correctness?"correct-answer":"wrong-answer-".concat(e.index)},e.checkCorrectness=function(t){var n=t.target.dataset.correctness,a=e.props,r=a.saveScore,o=a.seconds,s=a.questions.difficulty;"true"===n&&r(o,e.getDifficulty(s))},e.handleClickInAnswer=function(t){var n=e.props.endGame;e.checkCorrectness(t),n()},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.hasChoicesExpired,a=t.questions;return r.a.createElement("div",{className:"game-card animate__animated animate__zoomIn"},r.a.createElement("h3",{"data-testid":"question-category",className:"question-category"},"Gategory: ".concat(a.category)),r.a.createElement("h3",{"data-testid":"question-text",className:"question-text"},a.question),r.a.createElement("div",{"data-testid":"answer-options",className:"answer-options"},a.answers.map((function(t,a){return r.a.createElement("button",{className:"answers animate__animated animate__zoomIn animate__delay-1s","data-testid":e.setDatatestId(t,a),type:"button",key:a,disabled:n,onClick:e.handleClickInAnswer,"data-correctness":t.correctness},t.content)}))))}}]),n}(r.a.Component)),U=Object(i.b)((function(e){return{hasChoicesExpired:e.hasChoicesExpired,buttonClass:e.buttonClass}}),(function(e){return{saveScore:function(t,n){return e({type:"SET_SCORE",payload:10+t*n})}}}))(P),F=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){(0,e.props.tickTimer)()},e.componentWillUnmount=function(){(0,e.props.stopTimer)()},e.componentDidUpdate=function(){var t=e.props,n=t.seconds,a=t.endGame;0===n&&a()},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.seconds;return r.a.createElement("h1",null,"".concat(e,"s"))}}]),n}(r.a.Component),L=Object(i.b)()(F),Q=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={gamePhase:"0",isNextButtonShowed:!1,seconds:30},e.tickTimer=function(){e.timerID=setInterval((function(){e.setState((function(e){return{seconds:e.seconds-1}}))}),1e3)},e.endGame=function(){var t=e.props.disableQuestionsButton;e.stopTimer(),t(),e.showNextButton(),e.addColorsToButtons()},e.resetTimer=function(){e.setState((function(){return{seconds:30}}),e.tickTimer)},e.prepareNextPhase=function(){var t=e.props.enableQuestionsButton;e.removeColorsFromButtons(),e.hideNextButton(),e.resetTimer(),t()},e.nextQuestion=function(){e.setState((function(e){return{gamePhase:"".concat(Number(e.gamePhase)+1)}}),e.prepareNextPhase)},e.stopTimer=function(){clearInterval(e.timerID)},e.componentDidMount=Object(d.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,a=n.token,(0,n.getQuestionsAndAnswers)(a);case 2:case"end":return t.stop()}}),t)}))),e.addColorsToButtons=function(){document.querySelectorAll(".answers").forEach((function(e){"false"===e.dataset.correctness?e.classList.add("background-red"):e.classList.add("background-green")}))},e.removeColorsFromButtons=function(){document.querySelectorAll(".answers").forEach((function(e){e.classList.remove("background-red"),e.classList.remove("background-green")}))},e.showNextButton=function(){e.setState({isNextButtonShowed:!0})},e.hideNextButton=function(){e.setState({isNextButtonShowed:!1})},e.renderNextButton=function(){if(e.state.isNextButtonShowed)return r.a.createElement("button",{"data-testid":"btn-next",type:"button",onClick:e.nextQuestion,className:"next-button"},"next")},e.renderProperCard=function(){var t=e.state,n=t.gamePhase,a=t.isNextButtonShowed,o=t.seconds,s=e.props,c=s.questions,i=s.history,u=s.player;if(c.length>0){var l=["0","1","2","3","4","5"];switch(n){case l[0]:return r.a.createElement(U,{seconds:o,endGame:e.endGame,addColorsToButtons:e.addColorsToButtons,isNextButtonShowed:a,questions:c[0],showNextButton:e.showNextButton});case l[1]:return r.a.createElement(U,{seconds:o,endGame:e.endGame,addColorsToButtons:e.addColorsToButtons,isNextButtonShowed:a,showNextButton:e.showNextButton,questions:c[1]});case l[2]:return r.a.createElement(U,{seconds:o,endGame:e.endGame,addColorsToButtons:e.addColorsToButtons,isNextButtonShowed:a,showNextButton:e.showNextButton,questions:c[2]});case l[3]:return r.a.createElement(U,{seconds:o,endGame:e.endGame,addColorsToButtons:e.addColorsToButtons,isNextButtonShowed:a,showNextButton:e.showNextButton,questions:c[3]});case l[4]:return r.a.createElement(U,{seconds:o,endGame:e.endGame,addColorsToButtons:e.addColorsToButtons,isNextButtonShowed:a,showNextButton:e.showNextButton,questions:c[4]});case l[5]:k(u),i.push("/feedback");break;default:return null}}},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state.seconds;return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,null),r.a.createElement(L,{endGame:this.endGame,addColorsToButtons:this.addColorsToButtons,stopTimer:this.stopTimer,tickTimer:this.tickTimer,seconds:e}),this.renderProperCard(),this.renderNextButton())}}]),n}(r.a.Component),V=Object(i.b)((function(e){return{hasToken:e.hasToken,token:e.token,questions:e.questions,player:e.player}}),(function(e){return{getQuestionsAndAnswers:function(t){return e(function e(t){return function(){var n=Object(d.a)(m.a.mark((function n(a){var r,o,s,c,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=3,n.next=3,y(t);case 3:if((o=n.sent).response_code!==r){n.next=9;break}return n.next=7,E();case 7:s=n.sent,a(e(s));case 9:return 0===o.response_code&&(c=o.results.map((function(e){return{difficulty:e.difficulty,question:e.question,category:e.category,correctAnswer:[{correctness:!0,content:e.correct_answer}],incorrectAnswers:e.incorrect_answers.map((function(e,t){return{correctness:!1,content:e,index:t}}))}})),i=j(c),a({type:"SAVE_RESULTS",payload:i})),n.abrupt("return",o);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t))},enableQuestionsButton:function(){return e(x(!1))},disableQuestionsButton:function(){return e(x(!0))}}}))(Q),J=(n(54),function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleAssertions=function(e){switch(e){case 0:case 1:case 2:return"Could be better...";default:return"Well Done!"}},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.assertions,n=e.score,a=e.history;return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,null),r.a.createElement("div",{className:"feedback animate__animated animate__rotateIn"},r.a.createElement("h1",{"data-testid":"feedback-text"},this.handleAssertions(t)),r.a.createElement("div",{className:"assertions"},r.a.createElement("p",null,"Voce acertou"),r.a.createElement("h3",{"data-testid":"feedback-total-question"},t),r.a.createElement("p",null,"perguntas")),r.a.createElement("div",{className:"assertions"},r.a.createElement("p",null,"Seu placar final \xe9"),r.a.createElement("h3",{"data-testid":"feedback-total-score"},n),r.a.createElement("p",null,"pontos"))),r.a.createElement("div",{className:"buttons-fdbck animate__animated animate__fadeInUp animate__delay-2s"},r.a.createElement("button",{"data-testid":"btn-play-again",type:"button",onClick:function(){return a.push("/")}},"Jogar novamente"),r.a.createElement("button",{"data-testid":"btn-ranking",type:"button",onClick:function(){return a.push("/ranking")}},"Melhores resultados")))}}]),n}(r.a.Component)),M=Object(i.b)((function(e){var t=e.player;return{assertions:t.assertions,name:t.name,score:t.score}}))(J),W=(n(55),function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).renderRanking=function(){var e=w().sort((function(e,t){return t.score-e.score}));return r.a.createElement("tbody",null,e.map((function(e,t){var n=e.gravatarEmail,a=e.name,o=e.score;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("img",{src:G(n),className:"profile-picture",alt:"Gravatar"})),r.a.createElement("td",{"data-testid":"player-name-".concat(t)},a),r.a.createElement("td",{"data-testid":"player-score-".concat(o)},o))})))},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("table",{className:"ranking-table animate__animated animate__fadeInDownBig"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Player"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Scores"))),this.renderRanking()),r.a.createElement("button",{"data-testid":"btn-go-home",type:"button",className:"button-back-to-home",onClick:function(){return e.push("/")}},"Voltar ao inicio"))}}]),n}(r.a.Component)),K=Object(i.b)((function(e){return{player:e.player}}))(W);function z(){return r.a.createElement("div",{className:"App"},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:T}),r.a.createElement(u.a,{path:"/config",component:A}),r.a.createElement(u.a,{path:"/game",component:V}),r.a.createElement(u.a,{path:"/feedback",component:M}),r.a.createElement(u.a,{path:"/ranking",component:K})))}var H=n(20),X=n(30),Y=n(29),$=n(14),Z={player:{name:"",gravatarEmail:"",score:0,assertions:0},questionButtons:{className:""},token:"",questions:[],hasChoicesExpired:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object($.a)(Object($.a)({},e),{},{player:{name:t.payload.name,gravatarEmail:t.payload.email,score:0,assertions:0}});case"SAVE_USER_TOKEN":return Object($.a)(Object($.a)({},e),{},{token:t.userToken});case"SAVE_RESULTS":return Object($.a)(Object($.a)({},e),{},{questions:t.payload});case"CHOICES_EXPIRED":return Object($.a)(Object($.a)({},e),{},{hasChoicesExpired:t.payload});case"SET_SCORE":return Object($.a)(Object($.a)({},e),{},{player:{name:e.player.name,gravatarEmail:e.player.gravatarEmail,score:e.player.score+t.payload,assertions:e.player.assertions+1}});default:return e}},te=Object(H.createStore)(ee,Object(Y.composeWithDevTools)(Object(H.applyMiddleware)(X.a)));window.Cypress&&(window.store=te);var ne=te;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(i.a,{store:ne},r.a.createElement(c.a,{basename:"/trivia-games"},r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.3562a789.chunk.js.map